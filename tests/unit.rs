#[cfg(test)]
mod tests {
    use my_bc::my_bc;

    #[test]
    fn test_from_base() {
        assert_eq!(format!("{}", my_bc::from_base10("123").expect("")), "123");
        assert_eq!(format!("{}", my_bc::from_base10("0").expect("")), "0");
        assert_eq!(format!("{}", my_bc::from_base10("1").expect("")), "1");
        assert_eq!(format!("{}", my_bc::from_base10("0000123123332").expect("")), "123123332");
        assert_eq!(format!("{}", my_bc::from_base10("8238457283457283458294192348").expect("")), "8238457283457283458294192348");
        assert!(my_bc::from_base10("2A").is_none());
    }

    #[test]
    fn test_from_base_ex() {
        assert_eq!(format!("{}", my_bc::from_base("F", my_bc::BASE_16).expect("")), "15");
        assert_eq!(format!("{}", my_bc::from_base("2A", my_bc::BASE_16).expect("")), "42");
        assert_eq!(format!("{}", my_bc::from_base("101010", my_bc::BASE_2).expect("")), "42");
        assert_eq!(format!("{}", my_bc::from_base("11", my_bc::BASE_2).expect("")), "3");
        assert_eq!(format!("{}", my_bc::from_base("11", my_bc::BASE_10).expect("")), "11");
        assert!(my_bc::from_base("F", my_bc::BASE_2).is_none());
    }

    #[test]
    fn test_add() {
        let f = |s| my_bc::from_base10(s).expect("");
        
        assert_eq!(format!("{}", my_bc::add(&f("11"), &f("9"))), "20");
        assert_eq!(format!("{}", my_bc::add(&f("487234562385723"), &f("39847238234236"))), "527081800619959");
    }

    #[test]
    fn test_sub() {
        let f = |s| my_bc::from_base10(s).expect("");
        
        assert_eq!(format!("{}", my_bc::sub(&f("11"), &f("9"))), "2");
        assert_eq!(format!("{}", my_bc::sub(&f("487234562385723"), &f("39847238234236"))), "447387324151487");
    }

    #[test]
    fn test_mul() {
        let f = |s| my_bc::from_base10(s).expect("");
        
        assert_eq!(format!("{}", my_bc::mul(&f("11"), &f("9"))), "99");
        assert_eq!(format!("{}", my_bc::mul(&f("487234562385723"), &f("39847238234236"))), "19414951683337627138056212628");
    }

    #[test]
    fn test_div() {
        let f = |s| my_bc::from_base10(s).expect("");
        
        assert_eq!(format!("{}", my_bc::div(&f("47328472"), &f("33")).expect("")), "1434196");
        assert_eq!(format!("{}", my_bc::div(&f("11"), &f("9")).expect("")), "1");
        assert_eq!(format!("{}", my_bc::div(&f("487234562385723"), &f("39847238234236")).expect("")), "12");
    }

    #[test]
    fn test_mod() {
        let f = |s| my_bc::from_base10(s).expect("");
        
        assert_eq!(format!("{}", my_bc::modulo(&f("47328472"), &f("33")).expect("")), "4");
        assert_eq!(format!("{}", my_bc::modulo(&f("11"), &f("9")).expect("")), "2");
        assert_eq!(format!("{}", my_bc::modulo(&f("487234562385723"), &f("39847238234236")).expect("")), "9067703574891");
    }

    #[test]
    fn test_eval() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("99+1")), "100");
        assert_eq!(format!("{}", eval("4+3")), "7");
        assert_eq!(format!("{}", eval("4+3")), "7");
        assert_eq!(format!("{}", eval("-4")), "-4");
        assert_eq!(format!("{}", eval("--4")), "4");
        assert_eq!(format!("{}", eval("4-5")), "-1");
        assert_eq!(format!("{}", eval("-4*5")), "-20");
        assert_eq!(format!("{}", eval("5+(((((2+4)*8+50*(10+1))+20)-42)+3*2)")), "587");
        assert_eq!(format!("{}", eval("(-((5+(((((2+4)*8+50*(10+1))+20)-42)+3*2))))")), "-587");
    }
    
    #[test]
    fn test_errors() {
        assert_eq!(my_bc::eval("1/0").expect_err(""), "division by zero");
        assert_eq!(my_bc::eval("1%0").expect_err(""), "division by zero");
        assert_eq!(my_bc::eval("abc").expect_err(""), "0: invalid character 'a'");
        assert_eq!(my_bc::eval("42+12-.4").expect_err(""), "6: invalid character '.'");
        assert_eq!(my_bc::eval("1+(2*3))").expect_err(""), "7: mismatched parenthesis");
        assert_eq!(my_bc::eval("1+((2*3)").expect_err(""), "8: mismatched parenthesis");
    }
    
    #[test]
    fn test_eval_big_1() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("(3674*(-06-5-77*00))")), "-40414");
        assert_eq!(format!("{}", eval("121-((630+(42-86*(((2%9-04*0235))))))")), "-81219");
        assert_eq!(format!("{}", eval("82/37%8295*8")), "16");
        assert_eq!(format!("{}", eval("-143/(-1*3640%((0%884-751)))")), "0");
        assert_eq!(format!("{}", eval("574*2")), "1148");
        assert_eq!(format!("{}", eval("(7909*0%((((-6132-4/7)))))")), "0");
        assert_eq!(format!("{}", eval("(310%-4116-6*((((127%(15-(-7804/((971+((05/946/((6964*(-2%268+19-((((3408-79-5673+3369))))))))))))))))))")), "238");
        assert_eq!(format!("{}", eval("-35+24*5729-109")), "137352");
        assert_eq!(format!("{}", eval("92*-6132%62")), "-6");
        assert_eq!(format!("{}", eval("2746-((1*5235/(80*97)))")), "2746");
        assert_eq!(format!("{}", eval("6%((-2564%(((-03-(396*-5192-2))))))")), "6");
        assert_eq!(format!("{}", eval("-4708-08")), "-4716");
        assert_eq!(format!("{}", eval("((67-130+((35+2063*086-0728+-69))))")), "176593");
        assert_eq!(format!("{}", eval("(11/(55%4+-6/9793))")), "3");
        assert_eq!(format!("{}", eval("(99/-811%4996-9231)")), "-9231");
        assert_eq!(format!("{}", eval("6%((-84+-061-0-4*(1*64/-65/(-466-2+4302-3%(02%(((5317-6%(0214+-522-5+((9%8-5407/(82*(-372*3919)))))))))))))")), "6");
    }

    #[test]
    fn test_eval_big_2() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("(-690%5603-65-(88/07/79))")), "-755");
        assert_eq!(format!("{}", eval("(((388/788/(8626-(2*((365/(0931/731*-3%0707*43+3/(255+(5-088))))))))))")), "0");
        assert_eq!(format!("{}", eval("96%7320*5-46-41")), "393");
        assert_eq!(format!("{}", eval("(-8805*(41/(832%17)))")), "-17610");
        assert_eq!(format!("{}", eval("(-42+-9325%(7/7+((((08*2913/(((07/-3169+(370-(-580+(418%-6+((64/35/-313/4))))))))))))))")), "-42");
        assert_eq!(format!("{}", eval("14*((-237-03+029/354))")), "-3360");
        assert_eq!(format!("{}", eval("(-1-5)")), "-6");
        assert_eq!(format!("{}", eval("((-9677%(246/1+2%(-5828*25%((466-9555-9278/213*6529+458%0280))))))")), "-5");
        assert_eq!(format!("{}", eval("(7+6204+5/5%(3178-3615+94-(((-7435/9574)))))")), "6212");
        assert_eq!(format!("{}", eval("(127-((-1207/(-75%4986+-3901))))")), "127");
        assert_eq!(format!("{}", eval("10%(29+(71*720%35/(6688+2907*-24*-13)))")), "10");
        assert_eq!(format!("{}", eval("0429+015/5-67")), "365");
        assert_eq!(format!("{}", eval("0+77/(06+734*(-14+03%-8647+853-(((9+1+-16)))))")), "0");
        assert_eq!(format!("{}", eval("9/862*58")), "0");
        assert_eq!(format!("{}", eval("(-12%4852-35%(196-51/3))")), "-47");
        assert_eq!(format!("{}", eval("261*(6/1088%6718)")), "0");
        assert_eq!(format!("{}", eval("(((808/6)))")), "134");
        assert_eq!(format!("{}", eval("7596*1/((-86%93-217*(00-297/-7490)))")), "-88");
        assert_eq!(format!("{}", eval("(-7876/-02/60)")), "65");
        assert_eq!(format!("{}", eval("-4403/491")), "-8");
        assert_eq!(format!("{}", eval("6055-0300")), "5755");
        assert_eq!(format!("{}", eval("(241-2673/4)")), "-427");
        assert_eq!(format!("{}", eval("6329-37")), "6292");
        assert_eq!(format!("{}", eval("(-26%3+(337-5621/561%50-96))")), "229");
        assert_eq!(format!("{}", eval("-435-7130")), "-7565");
        assert_eq!(format!("{}", eval("9-((69/8344%70*(66%659%9+((9+930*1572)))))")), "9");
        assert_eq!(format!("{}", eval("(0%-58+(935+73/8+((-9/9797%63*38*5-(-1663%(0-(0/72%64+-111/(7-6%(9060*-3935/522+393)))))))))")), "1053");
    }

    #[test]
    fn test_eval_big_3() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("(((3296144419332906*398192322876874%(1587779455123047616*(-614923996007560419643211%((-65731641877736332*(545770716935496272564/900777966812217438-(82538239134715153678+5368780932176%7858576401656*8807231167405402/136560865172%(3327319780550763-29484612700675167+(783984683784013875551*07810895117213%41080426382900324)))))))))))")), "1312499402871814872705854615844");
        assert_eq!(format!("{}", eval("(868650395133-3112298958218990994)")), "-3112298089568595861");
        assert_eq!(format!("{}", eval("11440785977799035073/9962130275815328924%(((1717578840223445041/250244584100068321775876+(58580699704238%5180220354173035))))")), "1");
        assert_eq!(format!("{}", eval("(((981524256101041342243/14349478965889940+1341391123423734*323192622893767167498808/(0192714044855841648582/((905512021442091156026%67982613849305060918-(-139756437483156500396/25339466385924490390990+(8935964861483592052372*8763976513660/00363225233193726994568))))))))")), "54190964438216694172627837654290557035");
        assert_eq!(format!("{}", eval("(586810702327/10542012702791/272038561638*486192063236990293)")), "0");
        assert_eq!(format!("{}", eval("(-757378339410556121309/-333122314340870/-1306172442350*1825949371601539042-00225812881876724347305+(363368540687751%-4275955828585950174508/(-112530896141+-780884867659909770)))")), "-225812881876724347305");
        assert_eq!(format!("{}", eval("-496897159663/05796460218850265840-((4660172791208234/129909870623/-726746108604*886161497505183*2217715231018516*(1497422289397/96100102968928909+89553296011951-(89757649253091/((225340753735341%22085354023464998%2005237401844464030%135862862484779186615+855615319872))))))")), "0");
        assert_eq!(format!("{}", eval("(-06702666623098873*973323126803779092930973-727398236125713+745348554975790895+53065404425216-2354638648330197839680-649631636550)")), "-6523860435517922176324011995027228479261");
        assert_eq!(format!("{}", eval("(965552141357097788377131%38107022573568878067*117888949681199856708*4884280978273131+(08435373146476859-559692392942336+103450366740302148%13608594957110))")), "19871189471877617427455598142449847567304742551141044457");
        assert_eq!(format!("{}", eval("11161667817993481177995+(145659378455-55544517837446420670%(88895150720443378373-08466709357250969571%-53206739188921658764/429448443862329516642+594388966194%3773918026408895/(5643993287469757559758/575912482357/75450470975071898683*215492149404-1867064844832)))")), "11106123300301694135780");
        assert_eq!(format!("{}", eval("(33734857724688873/419113583620614/55817163179526%69516550396721593445211)")), "0");
        assert_eq!(format!("{}", eval("70501285412614*404478400585169570-(7413087550040077040362-7936732403291489-1116478968208850+-8538795998729731*-0959987312953067%6539056409793066162687)")), "28516247154010725487859401025769");
        assert_eq!(format!("{}", eval("1284871689145122167290+36298784971720755")), "1284907987930093888045");
        assert_eq!(format!("{}", eval("-8646271219046253%985618393542749871656/981941515112")), "-8805");
        assert_eq!(format!("{}", eval("79302980168662+72377152273905/(408764673086603+-73817344425227925*99593602112310%10536456549005953730)")), "79302980168662");
        assert_eq!(format!("{}", eval("212545357304999582685163-((((2145426735592959112827/52154792236440-992755218202))))")), "212545357305992296767611");
        assert_eq!(format!("{}", eval("770862520380750559219688-747993900584241776359495%307064646007577953%651760118203042211690/(((-2676946949232381576+419058025395837/138187496676863598913/-3877914478416)))")), "770862520380750559219688");
        assert_eq!(format!("{}", eval("47918763379088233/0452676820369/641952214835-((-3986435538913730235536-826469048674))")), "3986435539740199284210");
        assert_eq!(format!("{}", eval("(534728288597+(-88824578619015056465885-531126372072933078614833%7080706243037))")), "-88824578623000465402741");
        assert_eq!(format!("{}", eval("14236410898832969921+85866967986967")), "14236496765800956888");
        assert_eq!(format!("{}", eval("(62211078332325509580%-6735787113007-(43279197971355178-((40344693060988%7643866683888006+96728456356510-37760920267061197205%525302520173/5208372456201-9527569974545728%3784847686530915))))")), "-45098071480602319");
        assert_eq!(format!("{}", eval("80596451831668724*(28109695041576703974%2836722985261641536)")), "207873415448487394270939990667628600");
        assert_eq!(format!("{}", eval("(1045436439023617233*(139779447434796800%-2788915608075*((((6160788193393551197017+13355843692148610696054+743749398748927608888*58978278006030974))))))")), "81906000840945144044352160995546102268423719954393427723634473624125");
    }
    
    #[test]
    fn test_eval_big_4() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("-4260311865387784137701275919255544618324469815256187682194%11046709065917259065010197087073510227577030153573*12978330760150418913741527316848763116819596")), "-2803463487634681789228655263285082683120335876998544416844132129098\
        2333307076959182332140072");
        assert_eq!(format!("{}", eval("(23076505845125169583730413396263480377938065/00705837087650173564862637870395846719065802263822113670045%((26682691629316875198880284039206518329351982950662*(72078429159936766040781710721817660055367690/-885033095448824305731657385577093868662294305185625267-(-643761158092062756036577863071295528706898-04522265753813796129764150626752038068660595%-25927451333367563815159057478806562699463294853400157080-48248942813899691085435676661692767122218)))))")), "0");
        assert_eq!(format!("{}", eval("81190816396424941684503158633794299249748+(65906250180592608597531967136757798692716004655652464336879-9629888429759253230348310062153839407977+255679084649945431584059561136763303127011665383+02072848765553056849224458971853324933227451363348/((03089031459249012087592567744738933889211003909506302731*(9154938003420204207867206969893573521344756%183240871927375062891735572761521127107374020016-89219478454382122135085406453215153958881408950265771817119/910658402043683942745326331635330843460796668504272554310972*8981434219099000613781808885802516501989%(((48721677401608326805252126871289176719450837673*4900585794840589448985859913345307579256410335740359042-973650240578259428413220972411868183353253156509011-(-778406230985088510553101837016489397348024297734107020*75472010765265266737509971654858483865415160148210254486539-(-6591029903024317652800664065127558427344915+980463489078414584769745358079640556316386083-75623870052528931423970949667084009200012734342131289187883*647133537753703132085006925157357886975209705347479891023445/82899284295626001007401182817483353267812737773192895145875)))))))))")), "65906250180848287753742840535007546708007616530419935844033");
        assert_eq!(format!("{}", eval("((225238828993717344163167317783161563762747665757*9875325308256333928688574904090665810339888000395862866452/60618431585992672491160278371126358107639-(1915736673451169487198680150497871599829366925+(79390891732346357544624053605995811963321965879891001%-6187479099368792032233842894148018288663113156467520-70017153791007785999674671037313691012174610974994376007-66949824982617353047367599554218014990091530589045))))")), "36693570823460215307538874242436642962216321536141117281402353566");
        assert_eq!(format!("{}", eval("(4277163910840278269261597826071261284947069497722-242637941046503013546911053492596540382890009309-768168508186035452364525859164002544447559/0919048799952369667309740406642731269341393153)")), "4034525969793775255714686772578664744564179488413");
        assert_eq!(format!("{}", eval("((72484790232141635990893627784219719108761598311589104%71763526914391218904328504576960040194331224411766176%(69385043029582402402998353172263527809370710386847-(50922856850006477539487182523812372307191383524421*61230759535321962283062266079092147313506039/-36817403189920473993495774319723469197434880213327987))))")), "27412886607698677684010678380847001779375759902838");
        assert_eq!(format!("{}", eval("((-2655859453393917322862322563399181107840557691027+66696615812389261382784374976007251117644933288298502))")), "66693959952935867465461512653443851936537092730607475");
        assert_eq!(format!("{}", eval("(-107692587038727868134793724295665502250495434296%332821707536908628038034321831275149007742172102395836388*6760664073709275692736433650446932944750930023378527817899%7873408193046976812053949534892867947639870738%77558584445790370553399163679864573327639325689/133610609416749207727346702590258563627381948+((((-884032020742937728524951755090770477862503*(305581039812789193042910300809572827668748141969714599126+95746944336883761656223210378702942090598394))))))")), "-2701434241265127791233824884275947818800140532613118844129295941869\
        59376342794769426936335316592587");
        assert_eq!(format!("{}", eval("14105016933890457612849053044395500743108*(0463324418568024497649128685690628169645980588602251964670-614198579439031620542639484000410317309308328191+(397810369625943187169809823823399105881585652932449%371317083225330834605264398125858281108078992%547852020510113218543250716431083637572840438405013399))")), "65351987611262474628462659346242111745144118520073562001275174111832\
        21384068786273901332428381760");
        assert_eq!(format!("{}", eval("(170712420664587376220895615569911160371606196351110626727646/33760418899686248260861418229383503843531998082240*52999369247101489814859706888290761648593242506296/5723475669879809233530668305824290516941678419085432)")), "46823961");
        assert_eq!(format!("{}", eval("9461750499539653998753843301475475230029697815430%((90705332195645629094410708502590864119113755875970553%(-853041661563006506506475027426834483203960+09594434812061247668867155708932268942936070*(49407779492964533022484775477976803679672840358664655789/637486134745374815719773134533950417617330936365361901%(44784738997925990577450278362119651502079063324883436580045*831524537736254962896286694387176498682655970768069018-312798647044262019584617850767784909537080883229567102+688540158501072349740444919540358431773259781114220500486035)))))")), "122447735350871936307586141907011808716349561");
        assert_eq!(format!("{}", eval("466072522215584460481976545845505817755884972305221948723+1215609028007814118381600738059649373876107812%((-66944848039181856135417582027415180815060787757338-912669752357514437972320468947708769694368178054843781172561%759478683270642606516296234494182772768208382015%5727795750531598224947062387004421370723653521%435038427283196558398420265723711922924155921204688778737))")), "466072522216800069509984359963887418493944621679098056535");
        assert_eq!(format!("{}", eval("73580024341395567655348857840817858707978171-6437130434774889730179530339174378130265118954280+68203462940203048963931448550280869304239347/961575659439448473753874248279467337076650178623-08173503136706012764931144695543488203371046537521787525212+((141685622779168036775212781185608959818990-5791751541558685751876474779326886317896+((2171095156845067865413171542012645139927899380573886347/(3934311391536634921210785875089322763547006794558498%-39290615335368663716779786321308826936231630220037*215465687574600640409948577319684963323738679234153197*-023437922844587140597839317776558447926106644826)))))")), "-8173503143143069483787821792546012170351277443646125000227");
        assert_eq!(format!("{}", eval("(((25572487777261284153096825681869932706311208204657%-0781124220104887961333770852967470134011337752106156451)))")), "25572487777261284153096825681869932706311208204657");
        assert_eq!(format!("{}", eval("7792397516876348343839478302827829992774754793943731580664*633310110213310624599058150125352580834555797+(9473993694483229461426282574752582325461598361163977022%22948782908154032114038827914958460570555690503651%74427842349277074341317023960471608106530135810820177892+9039420552275070612125039131678243040860894303663798914)")), "49350041302388882074843414638736081536414206392830169976473733861277\
        39549134649162775051041417938835512");
        assert_eq!(format!("{}", eval("3225465607868009833910299839251214429411646845867540-(-2467877447299850443989466834183858204854439886*(299700159762093280548199748624882355120996973124521620779621%523597428164327969143230548943991606333092656849953966*06906450663096057541426208881779543141935956575-9748928915825662438704721556402403386229))")), "54924290596883761576132683878484993727146603220189105050200186421812\
        86435424469629227725139359985200130981365667411475623144834952278897\
        766422896");
        assert_eq!(format!("{}", eval("00996492866391078553061865414866289594236918456939588024*-7295153652661444007120184448092080449831415/(-607370094152249014215444462404422482475101877345%707367168054057062142684604104820828699863830973945626355095+250098782546171505052234522161806168376647653)")), "11973857935081152588938612716822098315624840693170");
        assert_eq!(format!("{}", eval("743194616743953866900554186722430914108817/5655788071890065246206666705436772993052*(((-4406548720387988717537541253645159565922235440262410304369-935167680724729326826901392294613195781344/(86658782646901065683494043783689389341644971-34938362436039876173963779703890594519249484*-283894416096357736835087579945526633642446408254987270861-562771743010600118761952278448208235839870859842947/41142229538456836571888166752352101336547774063))))")), "-577257882370826521997417904227515903135812842674375749872339");
        assert_eq!(format!("{}", eval("82957127201925988372951978770762148368769833643744139604360+(((0500976794321549204676335231581452442922599401595-(-28349550813655812067399386784283943523746/5113317434934113994161940717370489003550906965027))))")), "82957127202426965167273527975438483600351286086666739005955");
        assert_eq!(format!("{}", eval("3804366849114082497944864244888905451373657/(54110805646987552626829834466623205603312052*(-601006720027070494881236548148975386546855997*(-49184615245641021421720517212345272144807685698709533499+632285448432804126149398755699816698630703063673288+-630289059830843703339427175257096580321403721515*((((((0283341632927214673781788720595159542217942903546685+84438298920794808772751911156958449259687238709415650/7077049437967093317870311134773240609170223292%(957268213288953611109651676807186172055766-(-196129230307957264542453660394985952264234474352036745056704*87244131235147837250184808531427856763857229284757918329093*219456274367628807862023131415270677844657539119093%-153080040783359694957625860765244231937652437457179329)))))))))))")), "0");
        assert_eq!(format!("{}", eval("(-694433805251264529172047686175016930446808550504667553167+(-7217945329652574611088279575689283329969008854571624823*-73191922493104546423260213962733222787860))")), "52829529512739718592017591974991550282425729654389018772480936996095\
        4106466273602234265371495613");
        assert_eq!(format!("{}", eval("493976574750485503305031652082457099054245/7566367742354567109695132234940481284278764904414061757+01759164634424725153180184084012485045605152625673*42013586213947575861196942014502597465190248582723378169321/6514568402577485404759790449087876012108013*(5201362352194676148438852112197157501675263832686/-4955448608472159757705854204108178046071515468493313487/94277629024465311076827106651771124601764070974721304+-88221832965106221967723738131612256391205/537260221686405706987282705751931730330500085630676552-08430808772279830874509333912048358107479377542474573996587-5646171253804541776829655018799941518438977368)")), "-9564886691224607151689197536354556480750231744818608924626554596764\
        0045479384034751420660832964478618237246020807103306460");
    }

    #[test]
    fn test_eval_big_5() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("7065350279386402315868533934204768063264689271043566374490766678754748747381417295649%-28320690286422577656531659420543861440860898398295282371388264374676234580529696%46351116516797939873168475507423127064235623078842862733886442470854432412161798379353160447404%-077539332370920123862942421688183560875989599337176640607227325554832868521297184693656641706534714-(3861426543575808970780220532011967499402593806438296600985431786371264055448693995057926+((-93202086878318778402066359578404376448003115252105421115545305164656725701953501%0262547121185612913596336520278939505961954821565307425445800724795452197618679281122063-595179905134267056344966451825748731542158937276330292396497531303081706553457718463-249486668834854818546598051023166165404113701278568748647412316736600470866762348)))")), "-3860831003232428147217850975227125981414065319601973287509259217846\
        721052035774777767261");
        assert_eq!(format!("{}", eval("25900600369294562016306154728650003850912014044274806608870138216548133452658240968491065162216686/064218307610181452119823729367523699995329569506346337485543254627441966482254389919886872697890388%(-91572064771296322764553969353538011236951946511620314247557225605434614352692278092388228563461014*72675920504059933182537826197168132780644103922328804177773221482193022629980272476290655*(661051515842742702027875314410195627610724691304596196577328993597592615569380732150492567361050*((04211263532375063405739412180572336580095175023226502045223466714829328988419629475*((5984750131158456067404846212435630114441064043457980316324060646078186601956751618912357787869-(6591737431283411284114598097600494115373321618939184376054816322491168097902264581460-320748626862715747543253015115945840512888001218505680908655413066830243330611784)))))))")), "0");
        assert_eq!(format!("{}", eval("((72416633023294242961070387463492897497545764447841803328572371022897632436474932331*5590350627487117706927769340250496252004974261519767306436278624607320927372148283251750353143-(617012293984468319377405246075326110610514887786491073744162109110255737733397050*302495459839683675314515652166172059578084187838750675384704741871062949083006795%-2510004847851589976598749049541892135191865134934334379248735316044757299581187001424015713828001697-1991389480954608847401437366647532730904083060000596239735630715063025389659016474)))")), "40483436986227730096464704518505771315414628911499784394831063031427\
        02647700643177162588334030553514535242918194820127115314186304029602\
        37045952088094810804876319431188054443788");
        assert_eq!(format!("{}", eval("3152527577242171922854889179292163250071285244298974799706909420008949801597616740346624545820-507301203232756599112614531785491223602712915935239888895928962163392122174692355995662134134-633583163206453488069660537118761538509449996947174394747254753677384080874654519-08916094982486235324317364085119549850285648135603607356778360422265877546178834903806473038263085/6101373712238494175288708721951310842219003156156488235483018867824063797090200935505+330822539489295111124718325790070490950445733375356666251626442972513224133567597478561")), "26452267048313212298741793187369281560019445172709588361706995350772\
        53397182471132376359409284");
        assert_eq!(format!("{}", eval("(30464316321140033888423085317143916372363077995261635695243811193850130113349854862989/((-262690257077218387073396690764997299040558186164082597430238071584403448619763088-7982396952891622141628765951944080367586569229266938632227265420996616433592554646%(4242545534510256540148410705246307643700153550825373487778327962164371434967591654576056675862494764/1651648286519650800469218693112106275020211693039505516532902966759206214995156303-42720880198426869469957439501931381951177605989335137796933225231012144639031479066776298))))")), "-3694");
        assert_eq!(format!("{}", eval("199342772335669788121363601987046543850912682757676364357984018858829917781991156608218+(83379364639155638909896554270407131239619607016085185812414319101560294543757795%-881242096507984453793063878348271703057362108426248098861987204454965751918719605/35462815256342599224552558389726829501571367561672267106410844615162166187509089972583122329508033%(9375319009458107714997338886157699907885004881214941006771202814992886677689035450459621132178-(((645086805414553658207039992350865287427406011428417585548627432901456357143788465989814503414090164/-84394186040303172922981400962247132028917829936668357008389708103254999906719573435-(93522759492479690449545907307134878635479685749467988238506966289340596004604815720723310223%((((5523601462944690911843884925497498416406443817600747782559409808484676368896852775+3713658595868003536862003747335279221985535151027210900783826603557143260268728057+-326160140884896443367146688625248829811038470629108379761767791397118976341206556862550193522433-69696328260337476676689251021886973253875826499823028625345762581721599792380395876235127-((5590911763569442806564043680231668574988915716002787858039682870019701028469845408614380483437934241-97273056199271429377941048123658361289371230261586341049466942496540274365749782402))))))))))))")), "19934277233566978812136360198704654385091268275767636435798401885882\
        9917781991156608218");
        assert_eq!(format!("{}", eval("(12729413302706675096054198882048474747252959613706417084601631823321997072003787041404407-5484764180948113284441740891961042591658399644671749200587977105973058854348282924132574322627525418*(3266797067415567310756053317803424212751014576303654144431662842747309317719988151-(74604344147886472788714702393263238436382746046846568844653587808046079405689171079405367965/(262038556475642769425309240683976395167098441055551823695224261355133964163010744152*-38752244068882690407943919308074465581417953219255439165855321573950325421207377901199488135642382/218679089425872649814197269871822695357706388007665679203515090677252371591905345937+907938383085945229229599510128939232297412034356896454923336337949720413525647073196315526370398271*-090906213465935143739137006312040389844381421959892400429347734356800426591702629402803689457))))")), "-1791761154178724245760575072179821852867813359027965041880539107333\
        30675494022198397481336475488314786686774672020384043295630504579325\
        09623456321950728556603395089872385206369917711");
        assert_eq!(format!("{}", eval("(125190213713405182095159141418015727997973551318768267072391934290776651788551678931216668+(-261976795726628541570809522224252889878290627932939270576396631622269871215473425897723846622+((4044610847358390530221095554066485753870328137031522747950093879550072936780357856480805911437570468/382194742734597252118246235970423932740618334284065055467132791846404828031737414832899322562430958+((-126181224176898184708633202937615348759538429060988178692492380846526610255108985158407127*04165681049244883807420810772504079560252508649896347310009327393502241882900122520+-43382328841124920087327320868769579311902944282488486104699135939036531736229802-5516740816782189561324552814369770086264364469018393519275563117907861581691388197950703700216+(((5909378563716420555420718645179773386014818692118396552991175272922018818686372635336432642695581-202412561399294702284732335479633213142099491283373911436007206604701431864257274)))))))))")), "-5256307343242251302447126075136256377489543048973718536483058136465\
        35756764582386978425392743673373999016368740268359363276515250066476\
        939961677581181142163594736795321695");
        assert_eq!(format!("{}", eval("(61369764917925954586650656054926249516304639028780890305477086278348288771719917357504411354-3664981568305689490628592884529974458778253619561370143312177350133989836544644719594/370615932902089706305835355897820457890658254090397367022734612605836994233095267871640+17162089300021346324816027010033781534773944870378290542786471466329404315004207853481186024478*5502358595555173583432468630550635422509729667166409826203865858547240718185238935770896774294066794%(-24297690692535633049587269707755702897970348073230172049397955058738885808824107472816171689677659*803783610205398057696119879791024877018255083002717567563508098917196704554562344974763*6469075032048388478895849298690275875075611290849572193222203416104727762640299613*8911090677694785761371938104579469583431062995062845099011870475108642537103481820908775+6313322130861551341570743429160719049073491079901036001978085447802866264797437778219487626358737905%060053947255983690379987690015809399518080898719390660322197509115315680475912854095316101133569952))")), "94431969577657927249704006085011469507916625297707450050089002867876\
        88172101790265841843130132832896783669951020681201576931663890882357\
        7129238020204789283708264828710701415648529264865355394886");
        assert_eq!(format!("{}", eval("(-4957701075450484498602195118111882824818886009881183321426549146619574110630916320606955*(-34632330372038415855074931539263353007385140189589035536063676053479108965537522118158519340904/46014770348192768769549927652174632390959663475733912264072165142216384984322494664116367%(1468276139113895956025805129235534986114717592360856783770516585975572445957013310135920%(15810308416510739569514257718515464493101725771531159988704267262252401213617153628970629629663369%(653244410849123902674888263304179877581422891672318244833167084247842944336843905085444651058301922/-22828171370291900328979841051999938390095974958563198376374250099544533678619797-69417715379369298410056747599192866477548081417294266455688325103807919160145438463785018454667-1740336891543753848991908081682123412098252631515285657459581297717497900617071493843610457028004129-3713942881529293862208703378769735896137561615757828386463102301558031330011113615+846368915715967272654361214136681852614522728719193389323358682712087898605471381796287269941080-1180714013788516597114967029593324207496797978268571431808324362852215303065129657958880938322600804)))))")), "37313393489216754006054631227201369298575622720469244091218708169660\
        23160754699704960015576425");
        assert_eq!(format!("{}", eval("(-8416555599562476320558337806749844641417747852739332568375483857788252771957563953*(((34773618913930922974560336890383768777533175176458182076064874055909245362687790304*-825612812811147588136464020527701636056264417459047909051529057833571282655272109171%146880426806161446836819807971384998811454715003008505262096172152417084400529743269))))")), "82770617569878561679897245414595261330167310546108110945286424449389\
        72102889449929199488878086519583502800090448575125391776234079726908\
        35576176284269262104864852031");
        assert_eq!(format!("{}", eval("(3259053230502887391993501783669582584946900350107619816434906379757219495874904211598358478%6064765549984879313715783107128870548364291961031817916419921666866541124575626814098039063038%70443946110867770740474228622505001808612541906433176329395762520041251366084723/68755302202097642354896811078004924693655893676952947382536480955139212925953641960951047456967-(88199339884247638154979404998222560526567194925907263404009993084821306065257839822669211721531-((294800500609234488432079449938696515813886841469886251842527410383295551010167870759597280*3417494004929402153797829341921700016328935663918527108077913853739607611787805821897/((8572336595051060510329184640600728270492417884138938787068223971095820472040466366538550%2138639572352262172346060069098581267779169206511295186760971047460943639737299423462623719966062-(658713236891375648788178652033236331822226116169323714674844301647176549241372086418090768272359265/080334578874210810349248539059870071410114369150200851305451696831938838105352279427924005)))))))")), "-8819933976672087840736540511614127720740821837178586816912660891246\
        1792026995177674436211343185");
        assert_eq!(format!("{}", eval("((((5575566452655814554522094952234237463648003830824402932742545560450660666554395431221808101*-9148362596741084068996261835767355942555112208195760095119045868082077929624717727127854333896162044/38776430475851053908353026404165250468505584451140379347260316832758822189377096936714909017202047/7602996594090781432263557271608414282290895078739566138766345689388056691951891399641776191759646))))")), "0");
        assert_eq!(format!("{}", eval("50064646078436250702265767034306382743381712902359571788230721083418646687667822356475075937088616%((5039308610164843430908512527194855457848265188252630147682745044740963828752841224897074601780779569-(0078230154629934286249556129041134995283111499132318821274004944959195157917766353635587052221*((-962516268620604127214359837017188604005384120983626226685138779843255250420107015903858630280+8059949990885036968897572972942735644861846761245503373039249486394548159109007791)))))")), "50064646078436250702265767034306382743381712902359571788230721083418\
        646687667822356475075937088616");
        assert_eq!(format!("{}", eval("459339797108068450711825445096880819638393907615341961957094448414984308319386306877749075/-051154447634125763810404439197045091834753846838543906105866190154358560714024040869436599452871659-(6372081668293343712296244848361291820925999668117431712571057431833394793382978752410285924753/-034722209034871503887111029090022773323145710125866520358876735267856521151267104180982460789*-4341264249949682810544092045565960278709408691930769335123944452352751268830194448674088066168)")), "-7944513577407919543295688443385707310038217906233307883276818347805\
        53482195925584107358116108744");
        assert_eq!(format!("{}", eval("411475212489160152079805915962738153006107901293821931461921528519003297032735510252458596769530-((120876175970980283139225616798703927747782720120475729731055964631771564632440934132651908%29030375065369837711350035058214877096420463212041595908198262476926988722601013648889435927198568*3163821131219032722941295956561611287429026768913897318433188044979078816866268711671-((((1107446776978577426667547853123844688072187709195208412503261965217155708638974782577979768%232294055603773861746119897107603170268754034516921033161469822899559902761572038084244650768097871/70835027636256229490659435252837408300858866711145623088041777612723306942599948695163*7814909263477675012366704884753921128583399009140326385333432754348641033532110550389019025974%(11241518218275825034471680418540744880001998625474374176492355939652315273308701814526412209504*9265618494579205787126934191303797142041588242942583054661505344965650561730976311)))))))")), "-3824305997979377005419000815146768905219291404256760759615886714171\
        77345524173660824776873764142679215852550643288508015748416091983702\
        624791695091220011936022031775811171222");
        assert_eq!(format!("{}", eval("83707489154167576624026488697466337541284225269630819985716059549099340594339774607041713%-6860538721934130160222975011854783042122003350145237367010652049915326944760950606170+108233957091579199628942369389709469643446093876643436238449792855435325234106125064867364/-209828341778167909909558449850454650728231599681262081006510489207638114674835235563%(87476605592308748167743068233295024583089826629389253815845386515167456959620246183%6725043763883161334506414154483516799615141112855723581226374199139140324692182189080004873484+90439622597576381767573574165901651144828835892111055336246075317479716803635266501601-654038192878759065175676963658759631007841260580700825357581126062407056415614714441)")), "20562078492545391459705778261296443536623945087788708190938880824365\
        41311416260645722");
        assert_eq!(format!("{}", eval("(8762385396858754622471942871143418764594940326314128026637938658272900267750139225159900977+(((679686623005215786629067644330221066789890334368033975960268952440987322777908474782%07510901885459617808035277594860596861123118729248970797556151032188808946060720993525559642588+147624843538508115613932204509448268771693208938716833088526254507815555560370718289%899988342716692653923097332315670774361177130771487184661620803765950513953249248447786))))")), "87623862241702211661958451141432676042642758878976713333887477070681\
        07216553017563439094048");
    }

    #[test]
    fn test_eval_big_6() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("5817514094233520207264376337934297005058986639077797341178029231509485214687008568106149202460%972125660315095789979367324379867505692402386154561858673187546434321485562043366749*(237736359339804180776410250692551782479958143876755371192451191621129899880962878073703506+323058217413949540355406745491399588141258340242733360144783681447763329831073491)")), "11907172419263273596886195688397488518774707031993533181087697497235\
        73511406633733097932268908684380934239402166926303449258912333091254\
        38087772374308376348027484863371680670");
        assert_eq!(format!("{}", eval("57356614971750815780405670792901732572441148386596872697724819136971690308563100618236/(507380139347869459286099327314341678818745202918217609427391488384885549479490084201587+007954273641755819818867732761078755833779068223666268081553688886322932473393253408535142383-3455994829633582280091780671722339584454167553873544972975108856407255896840298296378570681084*6044104555464363787185667377073152495722944914934257136722046077690803043347356461317+-2962858105457603098879497280049847012398442414218539874181292580802105384154832384528110471*49272445943533873374514078648589399909826834696173169933923498094956711504779513)")), "0");
        assert_eq!(format!("{}", eval("(85333170824074605973647930391200487470776439564305950861207666049690971459117637223522736923412494%932943949093051176662498244990587820568550858079736756195717243105075543501121229887+2738957720979407589053521572155451196134502027109256364715031556733174044101192093648*12509643287044444078859300944127039305737085914734597351400538725694921499407212254996926-824909063954606228151434363796628559848654368746635066963088206665572510563460366990461010381357+1213319132700977049180981292178226965655271186948673809552500690546456739218409882124866631*(-833958090371163859598145891810777453354292412443845541902171624786125567670699269665896471*(849348745934263247525113527144592271674613601500368327691468197112221429009085037124308159/((933102455348707285935992177875710969660515867953157899077491919448033947533431868674537614*92095535905178174892606979500492113865408402466290942277451357446863095591208505912*(3555143166614868665837527734017245292484629659514268049635362413879888714384215078861%(68118640039969096622167163461923933089619417603097594136419194178001611388483213+7813118015317756150619488332341777107156231706141296021209855570197217863995579737263+62008531985816097569143732948895760072197521382135295854546627354477941569439808329281885/19606812707440378461586419687229186277174381102779745585886414518628744278907484752819200107367*(4988967960845212431633640422853712681684495307760377244904713142220053144313853072294825-940823061198227952291000324487447452831081813609029672261562220183331132100676394))))))))")), "34263384067748595664583740801667461668258563303691519026302442619551\
        23456301762613123798409679918707530619897434700261353181982498533898\
        5206846233314600131842012353027160695");
        assert_eq!(format!("{}", eval("1288412593184875385758089478056215071497908860919665523758301160962085256651344346019304772%49481528912241207864691460320985319898334770578540785814114268940395532648053059232678%4018658511131257066274186254174363570715275035815562556785911878073868893057502909332055-032150813532111538974000325574784503791402948204371448100403403347187061891250772041212529089532%41223496502178161907376386523562975411255624655821115836871447417083781129801027334341135808272%818937796744012770683803450985839529099068350289171969627988998921568832016462773037581051029159663*283700203185253283656204662653885934441270958294814637843505570365915251560647815201783")), "-9121192331631234404608306352635710690898500788417787296029520137133\
        07107322815903183747209957632838670724575921744818268870215678811310\
        7103107916569901664659985794432704140134200548");
        assert_eq!(format!("{}", eval("(-4902687336624818474746913610517021773733522005521914808581094571171951845943160752805742730507320%(4470989994883764688578046290196183025778979481434431021121273108922967987002004551209200954859773-60514511529143114258168001807832679739403275485645992322108740706572490196750036464530141243/0847373427008203234698146555207734108874325477666291592387726558545440686522942360530398945378/839366861471746559551457570568273715592403841800021972722321794817716751431892973864621506476))")), "-4316973417410537861688673203208387479545425240874837874598214622489\
        83858941156201596541775647547");
        assert_eq!(format!("{}", eval("-3846940540324489910104291596291783307319140818237528054440365665868846821766014650128%267816079998269617316702706154959444072942179908974450891503361114679312535905988313870049244-(-66839552944265188508919022058276552440302112465009374557516353226226984894220864230009767447%(191229718824041962186409320532035598267921239628795297214682737246359117046200672364-77890186030391454048716661175830702897699075410493237618929907874744276918335242))")), "-3696727481108858267448856509384979626271980419956786651575905642601\
        819955451414238015");
        assert_eq!(format!("{}", eval("692177108114387922030461191801772990733452736742356304328976267252873208467194678639610%(-99419474536530304356192554536829719139996191165115348625788287045478471996754406697111733433248896%(1612389487142793026731969733246754593712277816200086617242988743688616929821058509821082009+((70818367808961879073821466124836510580935058035329881786466211066956406752000540701337569206220836-470241481697928953986694351948377770350913071528196474858537491669812982198547319451418879073909-((0015339254400818320201442589993530798786886593180062235263289900153945698466118684306%36812641220116679367664149395694783492506527871710441676869495228185933697771306232181213108484576-829971799855440388413576571870775680233776016872222142237993518465221293276864188222448961-10848977058609062847477800018487174583722175172781482473157768172280763699577805))))))")), "69217710811438792203046119180177299073345273674235630432897626725287\
        3208467194678639610");
        assert_eq!(format!("{}", eval("(883130872793980895724392701135672450040426427792955177123349550389112977663743741482929359225-2107102523755987125500627085610449130514024183029352595197876063708227849698778145526590/0737460137684526172914556335480472291708653255906596835194819318427638450200815100939653909490430+((413559294147171063752509720009814143229713005160893759215072916464198814272478267331*(890077454792437959642001651453440648240001463675735444413067847265142670484082894116690%(89697670405487193081470417622378573850336707629430174407108295572499302090002410907067326516021/284842165314588208097913679523567097378905469121958079412859034583839828857352563352872%((-62429414898401321110462842959094895806368805518323829071265690993137651298555887+-04453766691534240476539096132751853269717989061684613964889889163210520309425756579*(174625482411857371610261769736718809054582519363910898117476469059131222791222734189258887892+(-06750034277495153179385377600387771449660354029376378087505634257263956888983205/4893830914416948042375185211155470591414885112478573809683656690595331514526811280340051449)))))))))")), "91454519905534168264888518666613266095734489689356918801625956152760\
        8342234042493360354301181");
        assert_eq!(format!("{}", eval("((-871467479793887074284620096217298134396918357333539745783207847399245891185250956167-(0909976551134101265075208569962656663654388419360463921743434863273239815031331207305422334061%((-5900898368477720025178951911899762339551506257564482963924808338353811581951374876188418702%-66270522707525139790301670385487459862979911205789781163644298674248797167786087937+460322475085919627718472450224360253790199458334819921056714074369846183684212713962223509/81418330931297046076400889642606893275709029200225177918239117590908950877378267883799033-532281056593479914780757638637959434449654324228045233359245114933129898068385007721149828442941337+-858655455877084117376414502078205557100095492537291051590054170131686738288971040636723688011888)))))")), "-9099765520055687448690956442472767598716865537573822790769746090564\
        47662430577098490673290228");
        assert_eq!(format!("{}", eval("(((9697634739827415500054802861717087688601495381734735226874010980394902459526594187202208433*316798712876702547696635141430098565677251440753985786333002371449144785985400978622308504797*34819392167725180928757575883181808793929284657414666746096016034627164676009374391349588-((((7939703476304563183459642903627778014857388668986827038392751994668341025203952618054619*(30336475829468829597653924560204161517846104303847736064936199732719870786474749-8884432950659888112038391731655682037427917798422571186996163345591541593519908986*13048375379194823560657040727402832807264194180237453409591456700692061325578982538+38841788416669313063195556762091651086786314632674231422851680848178058571104047120997143-(88366080122312636772789080213767061578063899479300561275254548276929789847569723-90306816371597015344874617406718859307114510832652819662119031032777201275592256412542-6774420649427210068965904843223011139982624415681815246061645008855906961768810229727809470338613/148874184935299963291114753030689913953276855150524401770056704377296939658544064)))))))))")), "10697207406554287559387138482736958601518786658539047401408006188905\
        25825590585574234644999793973979295093044166619439227499598566031260\
        37915398375727081808149138529057592574430537695124487762100044915744\
        38763450045758244320396032549233744140476373995029703309171980035133\
        1");
        assert_eq!(format!("{}", eval("(377398754077226914248490461351367773530670786582486625938285063656697383566447971082847518268105%-809607733717387409075527639694764939418001026952118318753707489667039267513152656075*(6607726852663488357410926095455030941279330209374752529263319159881705168075570011/(137810050288657845436169727827810666113562613850647020381094087109468933821555164308980475865850%-160633321621185965810879974652461022821402907551237385784191530157560469828614350612208717300489874-(57449989169434570844136958945560913500592326228044556740430214433454241287561432091*-4964443026168230216695866674398445991323068644458587985614390346328407320488768271-9773868033297470779416710817098613872923663390335435858653422301697917564032861984122646921346-2637935938545703802990829325601855883076802520586360770145395829681540905788272876249905647893957611-(-711601501950843783308681451716782289697587015221523791778062001894750470448854713644565530573+(0780625389752613137895839100637142884864541785679082007007051503158753517746739798824947863462+84347766989020006345788186512699530847617346871554003344060823365567268381390712180068100055455143))))))")), "0");
        assert_eq!(format!("{}", eval("(438460746595322986317967889455085837267258561652727265374543272104365335682490947142/881677118432308678571817491844390456984604839553260824827956511547947291178488068448412104861+3162206869356283824946740440720929949124802678195849142201817118274501262160953778402818*-9599679757484535506282073962239261926691601764669572297746447383290580428370273011278478%-195690140103361733851081701391531422505056979363191618615537789992860656627497133927093525103462+(52709505554770781357780666002119843603051846959370846411006727095716378803259976332264334171998%(796622444082475540166100119639023680370977947263894793636729409823126233046441124664292325290191+278941521898510195485149327074954720019117519982119160626222176497642764766686578854249+89391031779674793999010885328299877047275232517171810902105737384053157848765926851/-017203746025921851198510725140824071169822115329385767935744447253908866207885687072+-045494407714570665300370085389753871059678699598701505759357613069607575704258932608150687*950773514411603750287221609103258508262961733416166993621015342538678619488260032589667135764176925+2699249064329362013827289226342912045523043346356926430155979770217586348409129020-94055214548110381869423301427362090103760444492097862586367562995931564812772895592660)))")), "39618926720197786495868042101360350701451795083585988167434137678421\
        782540862371765475011039846");
        assert_eq!(format!("{}", eval("(396369858548518176299046886607167181490733665980922056883411577148940369313826704*499374357225646277428646922837961704400817034462374923248559816420570826555054259)")), "19793694333628660065854164923355605763385271034549814975676931585004\
        14349607560810228282541357533148630495459056706085912281370086310422\
        95614043446809923643132336");
        assert_eq!(format!("{}", eval("3849452631754334260709513945604967701135731322555251788177079777718669457107542634028833092477289622*671832558887222222707902803429383007293482532978366723697841850404001562344027268479749848537-((8486695148806060194561095544433265538310068720211726177308025144882025245050031679904610379461174459/650176283345988460445867169082446079156779918110601262071053280619802689997942794140177557372-(234249578592004444363362882399910616888442264195412337302407615737890805180213514868369198405859268+3281342196108645012477254954549116965063164343986848448106840360663902377631511844314332818164260*-2728372735944041043613009134734090296980586267752852287712773013277923913870636826792574099*15632514902633933397765854635868748233206788040625322391781159060320211107197210403242985946/-54743496937907900293615784369227331822852792627187345714152047567547758733362689356)))")), "25591199920840351688592181752937724817238157908247755919234535894266\
        01924591054590976834052220641892052871583989557615400878318491199912\
        838477816768488355849681262905076348517374895129817806324753");
        assert_eq!(format!("{}", eval("(-1147987422148772187695241055371050447459572567235457066162821431964949480324773370030575742905*(17221583920348879051725034765661950000062907394430323236683415450709035547584519572427912632583*322330177915348693462259713812889983712551190213708196467440243871826390607299734+(6164729091195966183031854401857641600660240549051034318552261444380327504959408867783046436154775221%2593769762258438718631157907854935926389645118220083688636457059768818604668180953+2739138512480557175643093443277954294788742629163205024296971937803216455567129701145%((-00821609821102692333989995717821480793096128171337980766199482531093982704439666827883133190278*251479780544319240113413772339883292784862986365940616983506233081815551719326806+-546817138256409130913291287877585436167156789650624123648231249671033279417487260385*-0673254282122106043650408855811356721978742198731811517075153071448143521706843352863845+894102897849368341249134974338943681360309664150143060846154899420782450138181627497197229940)))))")), "-6372519747859029085991780443842526133761422620425703994057132907201\
        90535406128929222390784555278983323425969173782420081785000474120080\
        05118742581196150476366165865619668512233461175471499937596374233916\
        10456904908133446587143333202816387536647070687595979861538543685");
        assert_eq!(format!("{}", eval("(802987413005801046025381338764554454553695634793133620587660137192678062188244309384900471409128/483628378815129140786870806493253025767568150647783618799307616248475440666706161717742730-(694354343865015395944259285163858108311263144943403508468127208091404999889123236410+105196660921134650724362732197633433987918270793297315577045346378649411847316749377340566584331%(-3797676902948141643036564969129278498084812691164923796628363740071446055480630082773959792858850+8094510592206993760839730663422196426549665493935383604571366881080867926018451312531938+((69319213464581748018348933974574822405892872823718359454442450933490560284406488%8711784275526874422169880800276104343285486298685098555420766215613672843960916955928-((145785041060069446311408168915282326146921977752571581859405249390306257382080949454169064-((((527202197314234892992225414050085085998251084654466767070957545133777898981159756284762195850406229%85214891601948887619556772548651990736032182537282131410171809623679756799643377882*7371121225199556035312500045894714377933670061135516093800966510439741074768264714126591134736155222*859651197646995496887546511775367763429728385110428149424345244395178459925602328182439588738353120-3331130039018876020963915545137310314892395524135722653357760917593988605570535995694*63411279399349601916163978370258450520707483759498091133100601095596279699150533757435)))))))))))")), "-1051966609218290050682277475935776932730821289016085787219887498871\
        17539055408154377229688160402");
        assert_eq!(format!("{}", eval("(((47236724623174083405302744125511494259326142772206907504629189924087210686900674281661+3548030980479645697621033534323991792004149702652513012072165118711149589112808974012606637030543171+726973708085921914756982368962522591761786757827701899618947252525406648202193959027-(911490699586320769667929795873107015568772507607046878995988155888925011466799575585475%267432316797160910165031752412304491317765974391908491502440117377200386938447897382305129363/(-4634617001469800610234879161277292293611251540162219654205089087371088657423526296852637%041175859814387753141107129627544854719742966011379836004259301021667525282971562593*65209205408608743444872507274358693629456256738640991181188657385188875156347794727623772179824267)))))")), "35480309804796936613193647943293118517306441766693641000016951533205\
        53837249985586629941739898783859");
        assert_eq!(format!("{}", eval("(71238418047688009955545575033977387215132631325600160078973771943788558262381273939737281913884+562589848798292937344829519728355756224609273425156552667769785976242882127105890)")), "71238418047688572545394373326914732044652359681356384688247197100341\
        226032167250182619409019774");
    }

    #[test]
    fn test_eval_big_7() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("51619497060486977787926914063384857693839507648683427865421073225204643784000441823104629871956426/638882278753998291610973973830858629194800761085568803953309399628722581983816597820*(135357902729520926591876878570816972749755448525338611413517390695613634558493955481527%8778557071051730246689441192438294827365936354795039918240076238357197664777343304471202341)")), "10936454327214982301985748852247168054101856259607790177517349819378\
        363863278866475086519662347911220");
        assert_eq!(format!("{}", eval("2146379472126062370681676953992882714837482220837155837275956078140587662656255358873708117150427259+-10141579155097098756047496742710053341151705591930422092360547739557781889195657360%((4752271190941696454411063533355964567299896384775442238885628373615189435011769522924511772-250907363046430504655882551580107843473690618074134153889669494160811826009032274332118%7054581474403466114982998173671005059152487469174210045687557459379357453404188153320174319694%(5208492206182388551464807104822368297552953758937672553751763205968608256578053480758356154959813791*34671184612784549434610135206808403850436721372459760092979907459295170621529768140681669572491*47417464989131265732656466153955653262351020744268665163243095103869536910009863016622535731612178)))")), "21463794721260623605400977988957839587899854781271024961242504862101\
        65570295707619315926227954769899");
        assert_eq!(format!("{}", eval("9723634304740488794800924398095157597118299032263630028118394981787480087218292071075937996207275+((-25179950720513256165922273990940633774545043664551266612728797796032965791152767107356-6516731547115098134330756469043913001799640573156895259613832922036228489471114398-3994834528710478173809759492260134248806223387565397319274360479990883870292296340668494))")), "97236343007204677986383858530213415001107551057698597972478732390051\
        31195598453198763999417317027");
        assert_eq!(format!("{}", eval("(-37447799819314538568154749382768227568430973642752619367546714771947358982291523176316111668977+016897299669988733740371893490766413371285981800443097189179297925826369809794920777536970705545*9018359385751653792181670143914988381825510195615696896759817774072992055535367012829185096+180132948113294326405628160998678808335947105002102177128352604263834879071355577835491597686705014+836534441271203764981150695399519064159431730516180634681914334810223525375837257175242773921)")), "15238592107270121914632613422872411105154712077867252169927795611700\
        44442348798160138183415193208125378696712806087959859207959609112863\
        65318484336080350484357453195030695752023336367278");
        assert_eq!(format!("{}", eval("-62607775504596554485362781885325402187154671862756910387639865439139354431374224789702388905493893+(06797385629238799711340221296983871931231842780055143747555568589757482236680416303138522%39403628161110193577114188252982334429135698685732761295579094869121714483198727935/0106521859831148472551161343445263302728183155978056760997462995893266466934012582928030428954641803)")), "-6260777550459655448536278188532540218715467186275691038763986543913\
        9354431374224789702388905493893");
        assert_eq!(format!("{}", eval("7425633630025218509869497587963791625976141673816098577037467476199743869923184188078924935%((-38677111840366463641394546912275971570707834295573702743542984595616261536654084880620302794166%6528445687005140007402010010334682999718956563752733846686385205644668962472020147128647593052100825*(6793807827204552090095485450926852961870346560490578610376769589869599206542219391602853+7221292524251269467677855235721603587294900919492320446808240299593032227572918454176198119060)))")), "74256336300252185098694975879637916259761416738160985770374674761997\
        43869923184188078924935");
        assert_eq!(format!("{}", eval("(2213946367078875246336762910683270464589475579570087711988072830390826536042747077772563050410679078-83435282688688775662730849657195786731958980341900369331050824164787997003554531862/(50230539828263780732320702712071537711409777647008147581721056445400472063302078519634146483477223%798450266961317356299033067598456597192634549863105775419814414275515061630460333677244546060002089))")), "22139463670788752463367629106832704645894755795700877119880728303908\
        26536042747077772563050410679078");
        assert_eq!(format!("{}", eval("5513184116615459270946058076993615471797432152698168879312448141102793005514509457413436847*(1347668732065838789769643281399735249784804746640704820991892833637441768697257197691648438550+2026168191335955672823929132990816712863153826737080555730601718977473674011754820029)")), "74299458592553157873535638935177775482875690733914803626151839724486\
        95789361659895626465602763177333680810213348593722345949610965226505\
        524803559969152336839506208689128443999427460413");
        assert_eq!(format!("{}", eval("137212493174696945223998562071474419769148094633890640518976399792261605317908833-83411185752878345058131232321785952688960799907171138788374193237890722745800365480715073%(2034342386868294022472567697421591376866189074029390734446736424873332049415419859806%5603524241011029716812875995789507884350114096700656674698330976949452593752291923040788869+1692543418902977322245572001224189871310750306421037544838573078245459259420907109935120-(90783738128453040633091919158536136487141113798628323949554990413303041160817729801/(495553985131252772081624639861722777590938408059509369638521433718186983168029065776496024*-86363353488350212345388307007536940152715455650141505565847575476930819238120892%(24474053097154512227347911408177178414955491889140677760163948568669983408200306*26069934965101733984026057303536703616148895618529728617726672447057002311008245889599233764074500-881983234090019700366467656473830363138782264667738291729326554551849573591240475021402404181577))))")), "-3768753124634166863001032206284289457931718587647643114055818000680\
        25971492956202854866");
        assert_eq!(format!("{}", eval("0056515483719811888465252327258774907089322413086150083983469680261203430915150939339698654192898+(4038182064121325515616173214147284900335913378746015590954096564370655854373853983815441857+000431493333208564658226041896242812024472245500513199147383212719995775242392138264844371251075476/(1594154146787748523057594524369885685631755280640671487472518068059213916767032828081824767484+2870163543404827047507404342108061354371341659528668648189894275995025625967169950628273800665452+4565555306299617133338624658822321635678526041171693287790556626836612910853099587962830261029757%(-869189969661671586543266370489464042114097371016508455479372290985796308491209578894817491253061972/(12148817488710562232740499671321971495403902438595191193610648756268823382868862*2131987257390286421674942489876067549328676471080741792435446067768724441323097914698742328821284%((9011057625704037222639520682153902729565374956240856869915576630131987315586759201935/1272671715511912874561153448583118392455345042976142252277626844583556947942534131412+5307743990411573742254389203140657547481413586030394445289337909271554820645963792326/(9329198647595904639858547957499455204837595704087778046398923913692763063561253141219159198969619108/10469076596749878412863451328542483568659524018991950888350280613811095470543400719371%-32023346805785317608939697636811353976996713777403387282627803362828657190975849099128754694828)))))))")), "56519521901876009790767943431989054374222748999528829999060634357767\
        801571005313193682469634755");
        assert_eq!(format!("{}", eval("44140842939520621761724411069045425820790050135071645102579499439922329709465301778750522210159902-(-14083865786659932508795227591938290126861477942118133696016954119819063427473535576546955181515308%674992472138461013196968603800270082808426806758186027497134122395285914944055641558*((10950890643312083338408067571664814911613191443760344023990607813331190102298026+302773157807398694881895705334857679684176119368655046345995913466211587840596272137994/((21382459063076986097479300637400571826000972258276818004782220088781155287921010*(2058477250635402476595058930622369471645085903839865496725992835260534565688194227940343342281699129+54065971111568755816513897192025032123790722327486758981262447987262129181475166256559+7156880880010918375866751146965085807744601750443962015796875031235999377528783018600434397660))))))")), "49670729784491142751194456191236551760106264582265250486343489223548\
        85763710537619244833981778263785939233793711717767181049676211788298\
        334534595924857649487257998");
        assert_eq!(format!("{}", eval("31517660277852995940481691278833765992865541034208364566332353784824606582015834608228-65798369538798390054747983264883335835030252458635569747458576112404110716817782574539154381508624*81727532345621206540272409326384217158523263777971985975440426445132529679538045-(727428825427712483803110466349412361453813131823236850161556234763798482221936935716931866181929753+20705302681406759124916829798279451914448377868162865822033813880127775576774345926941357)")), "-5377538374771282533130104556270995800229248415236516824567922292919\
        46003805704856237068275891986529906926826139038717195944354437637862\
        4372457268789791856813479067917846777862962");
        assert_eq!(format!("{}", eval("96414947168778199257651141948311215273790733356972610946863988492958459446288156809235963*4009131047627413774849612811377544220915986695618940579294211917943878705691341025225111103-(59831137183242339889635341470951832092215027235097453968992955258886911526837612582236620978342067-(-0838408655112757475931722972062423461613390415439880364555290585502178303233440932267/4945601351164419754225598677799645659820186975347985588336042093230310442093265659299-9075579275848162065488413596207108245347354171578644924010599710088815501903946045650946421291593990*-41943211862450492241638219869531196198449881260301265555229045376558177614082284106/26150297252109560623738434142678557579156825747297677372429255858574141692189589062908895+-79392224366179549870784224581256329151266908444687199681292181429560959545777117972583097567617/31185519215429354454285188829361800016568021860546556566034775929078371241738613423983/597042642039563216090710865777701233104975190020582868253903581330397029214578173259/(266558427936542999728947301843138549530912814183501299190180034389224742659212374234269179-(93077723039951183670060220933034871581522631587687162374333136305631544797875697839783299306+(-532723057086810391062580203089723878228670028911558125692397271832124624146077037524205-873272196287913104067779493132573066132664971041103150372903579528434671977084400255651-2271151304555280868012124181593871997082249873462429757182624285861450735205371767755661718)))))")), "38654015814970549365569066476802850713795816940899597668735801515544\
        19154194635452215054934572388766610506704719581213389623945746186637\
        15492184249059810303390063597610247686435036");
        assert_eq!(format!("{}", eval("(035226567685285252419301598274812740388890779289247910020203250118739129478574410774216735443706772+5096637971265211058108689632154501985588433132260287048899962280102439373260742347909781953147038518*1404532077114279560977508997303685716126263369274538577544107909541503954318659442778613*06156698840660063577329086007234495051763017165640298108922223213081307532566628479401761222)")), "44072060748044478855252733527856872345976946731299083331878465980443\
        83063160399403607943609297469242152000346486339283751101699881472230\
        51705962286112906522341711333906128200772496407018395977655410422358\
        32525530247883062829855748633973544732667241046659933617776200972789\
        729320");
        assert_eq!(format!("{}", eval("(-14568786568332695755676529541805529784923634544997438878681104182612212699090331823506368%4010653262965732814691344210123068143508263311790245358296338329167047060081479691824206*561252561972217923781068917288264473338780070392695079429824366144249671313982501730305534599%-07760046164830316379585562551012137103664201878838377667440781169407722047441952164439367)")), "-4249353903287722226313511327020929026626548009001904492808725372158\
        853803508858152055645");
        assert_eq!(format!("{}", eval("05296811712472613728854502945514671309542564769597800811292468989434804156821545-83518105611028338274505872143224952765177788783260333000575347851507344059777230325887+1631381903828257698344144067436306453189765038190264774128043368888236648299899633894190771*92161758223225895624288858171558956556354252887939781177846406388042436004878883794525643899588*(2738319972843048976206928937250678012980160353475828980842561929349489546213289614423019370679535%310881399928035880097954966922272115433376053619617634202493577491467676140560329/-7568278187288193631100674624153129473318284318824080444832441089120778684889361019)")), "-8351810031421662580189214328872200725050647924069556340277453655903\
        8354624973073504342");
    }

    #[test]
    fn test_eval_big_8() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("(0422138740595220171243802978619719432911757188821491212262392170806833963032076457137-(9197350641478937252254380755099555993127518146789360645745435174359167253206814547443894723503-705293671089322417290950932854596003477020881506187488977446915484995395112672744474818*-44117080249973937685039656288506705787108968474831668628853605237567386760273941528%25286971457309705130984998969065217954426026548313049769618212678970831529051066183880/8749573285698192129882468748980638792298572464021343910305260150244916851066720589789799008*(((589554401290019124427122426239233998987400308043060649467956259328350383778920751755781/((4731542199449462101535692745237601025890836554757533506072203862831785500841690026109522787666272542+((-225194523054518759707572736038214714051690763080283510844966519745280784816779281661317199155-807861723291624474892818761287759493797201967156911867070480718280858911071912176874691092161*39647871073480492909249148933979026622904345927638900291812688463513015809941678289663522*44031819036258969742449212664466766671799232304721984612077290849610961453019791272306989820777%78515339106242496166190929130879081643648623162034001151823075733472342103866553654765676427-486692001124731667584294630605080926174673795774105381207950868667726268047994463134079407173664*873407923919554353957193382612661080989815727971214795152206302947993873628901615344860%440465749835589797661842037416735589539671595044745571162233847125448003005148139159633380/290051324160693634886672820462118219137093846470622322613881559846224069040839254057989+-728549882105785942931351543282618393654114957153648133722797307790956486666166394271690978601088+(07617660878599337522512377875602432276606073820786719629375318694047059387111899263%216216019975608143856365406661448822827825876074314794339020107178361448249557495084526))))))))))")), "-9197350641056798511659160583855753014507798713877603456923943962096\
        775082399980584411818266366");
        assert_eq!(format!("{}", eval("-3691484570763477079118276271539777387487524674122650251985014843965147723868111946780708+((886768407874917309379469669387902746633904519853726894803739586982455920213821505767776/0097106380672272666082229289472826465272964449490057051739073257317341794319992833412581030556175679*-7865467095469620054486412583082622741544937744770880867037560342637990363002309222*128205991466575367072996343904709734655381654118696437368784122461852398991685391+(7784385393040127688823132330691519799266292061438238666366312131583226899490156723169329187*((7944984454635382183716223085508753779505215860003001199867732253200452815261217934741728866546432548%-6694810160917804842877767121128538674680801343276851140574532269385676758581810443157911+(723166142127427307013545509644079182622933533454266272828492740165919696698500185271740533314%(3091786872125212886951452047688808072511307141556149465005741815444875932787407544516489136395-((466758971974756738307618543090068600311693881978962922028137239293441300146101513143152796436828511*((849099743396810260807150457394771324839719451283546346910805756476717362198116224703613507567744902/52920259255712986185921978643973282402214279202885295341696576213854051252471851740363397+-315068346972425420499947591018582290329654518495005456124434140170489964105278339%5771322153595156791105197697204418009879261626443590519780166546982990507818029802231357726+(677904408458370574158986460077297627911930035010981696071813440677458842728438729751595628637652*810137231309564226856619271369504113743061455324002069554575179490609548856777715371947488726*59338975408682656913628118467058622881698912299982745592320588899174344745041970684234272452946*3250620159433552898672860087793166403041512160266711855512144756422053961856839606587686220840118950*((4237252373318867944092853855578121829403625373952600913923945891007424770552802502739581743/((((-89708822918657894608899010233264305526115359683304035487254954354001124901328662517513793421254/-494463382226666904474654659507316242458049485175505339478959927188077805488326178898682-98605475211987808548339428342298791821340005521019359610672234861025208966118201677857%889289380828344377096801397053214312519022300325300417568285497897892023859877422974736061+-5440919865753606675320869223368570038537157711020509611481463339240746794367311309*7928056742801622488504320937875783035557710773490164075939142138200845760633635038026928/478044152417988375751139553624631062250003979405147340796540100848428753346856503348747848727345851%904683776994077883487305310931417466766378320775023290474512662417318292132063547929685060))))))))))))))))))")), "56294314460138313832129311338704875717321998043856835318439308123432\
        09266711818559387937126083430186226538094533872821378818509154266537\
        604101767267216365275991463345263070942279752460");
        assert_eq!(format!("{}", eval("(305374089275824939847587759463562777442808307335832826218784191018849965630306391281803211221+-68832883466122457177954943500997041434839023416617732092587700913828788001120543173700932872+42138420916959708628847722451289214358723018058495944256113503696064371557682856879060372%-6237148168807748231482621078167786047237348530499006296809980289548456576995652693%(((3839324789323989468092161381353353463126413928197404545768357851858762427511079963033758083/-5140341780201535398048961421032199950184929356513267062570113862107373486433774052704520095192792+-266867799323863883278374869769353722500946929874476313049956712693902776338366803))))")), "23654120580980544605920190005345832882517020228582884828658401248444\
        2557219923194634804740043");
        assert_eq!(format!("{}", eval("(-833717748732245870936880512295601780736248390557464748188482716461886128549649523235982309500333-7587591888917478848423392079108903332192752907214486125461748956825299717459919185+(((2286038369183971947084857428100176959118312670498669708228960489134490264151055807885131553160426/8015281832449236721218782658789982420458402211672127007662137575242297495425372509084770168655347593))))")), "-8337177487322534585287694297744502041283274994607969409413899309480\
        11590298606348535699769419518");
        assert_eq!(format!("{}", eval("(-33204024750483183303102539999451014846383463379472100223926787668089064426408963097683794302109443+762506864891452323777292893458975740323836897851372444078174695771833497653190650854619615170078%8381521921680326881125415264554793089675108067039406092748971321513488616586448608278912177809492*193631965726660423684393860659909024553451577440428469980293097261248538714076752715/(06000023469036696651639381334178641616733948127228097488561203660492695856196822622114885706714566-((124655796459755115473324742827244466020265712196125132412910588977899320804399239%(-711834141162493357597575613509056658204704305042626223440096419500816885251860725025243430931744%-4886045033688430816593284431241105071007443757923600516726503018878169761187649943521611302248414390-2249015739823505833201300601514109095096057377598662189506370733783977473030097689145134%(062251495215713022088736811740906280103347922637773908544892575925653212779816851214960948+4991383197836248839897132446033132251415591697384103176449329283336271444323608631225097739321/-065273369150008053068541575141780260223063153732053456863471946493875404977244801713223370%08505419606373831385547754804088054169530255208967474111688431750633898183806333469869183451763132+(((620992889309064381997027334886532689629259973025663248131439036570742814860355619827511641969724199%69184114477171791810632199500722763220420023479729910805611483808799907171660843020903/7629865597036895741783032912243875034007619489081573577608257816978614385698372521*0881844978635929780545531529140159956087824100770590688750341743438136735498831135731276559297%(((3668279832000099627307291930589508498044499356920198265175731836425800694128434269120790608479059%99570401878844335133884158755664436399211354181426260367561058619923212986612756644576392318548/212508771747796792561248522755284683561233214061370212256572464874488488175229614310782+-2303275616776120994353888455852542718278796231126010846458682611572171805396882402391428188501958638))))))))))))")), "-3320402475048315869558160430059498340857471967822886673056682291184\
        4837162022017726635523397028938");
        assert_eq!(format!("{}", eval("((-051357789894758974691531780888709621493694733174310951279646779574903608518977312/33497732786943871031173045856414408649766403614142138241182981383312208713349775*(833961311246908171289789789249623431987267351955920443269176565058264376058939606760399/-1859729750046965386621319929324389622579424683301971830638373680678521933660071732645-40905781744303486850073350623494119660809931254452318197750872972587848438086113306143415522816986%30808195395328085831438371486987840957415145178040178540071356139457776086113952788150*8090320780177973841016788743524882815459066510288158661652331619749067520907953585270)))")), "13879152203355651329362994834603743064274488673093269547121576124341\
        66034563947891137887338261455173183312031343940491088932123388072442\
        47544000308661977983613288654956168");
        assert_eq!(format!("{}", eval("468853893113697207846701864522013506205155236822817051591594132164664344556168845860127708%013698588754760780697422512664137394493727522352245621860553754536427588355419746572916%(7075709312061799005637585007204856059536097915068692925792947266414541725823370622709131722/952593283650906492008307480471578852568444742273236158018602665546773554266593298157665322041161*2497378729430981515367480089736358786827935664941611971785211028931185792154710015+0604723203278861695626870939578371466796208600203731885155085304018622766904552232979511157915644188)")), "59943932547276967189460792470422628370567948583977922813294008937055\
        03572599655504692");
        assert_eq!(format!("{}", eval("(25140509560486473049212556150865172516501093703795596819500458237843380127630376295111969523177583*06999233614204446034840792164906798221552053882350837336580386345806903914729803484991994*-415068033458639736366541864595628820495607322595558583197998845601624944016864697456267543*79165451574843245912630302417417729759664177175007423733916516575263770473529632966)")), "-5782019419968543986507550692964327940348099260022354839396612154248\
        75906795446652835228321029802145092816921066252412691262597774690245\
        02846381473292433705249239160873087651998103339353421583138735724091\
        28086533549604346408373390630069289755378333559683994904313680703049\
        58816828774376229173087535641199284049045158599596240384255255210683\
        8927976225483774076");
        assert_eq!(format!("{}", eval("1749594044058424994623415073125573446805919011580527849423595548280135410616891703140510061588-025793332067808573819202296693667199352453067627249411500625525110867314680779484716847%07274139986618985819439608644312029396549464549258803778779115935707569983521008970737973799453/24471417726605918667573181185406637072797141355015556144049957560537009894162471362711772+(0843381603414793553981134769669569716322957238992506926880098036959479046853649627726446413233987412/(((06280985907091954798597986432023684959901381266268568925066721899593873626124920257289615584+56330773656052421466746757317968988070156516730182040554834849752360889422142339168371243029487-1689761570140719037700218859861779910710845690197493950786078836423952238525150921339262633080992156*08546439510724988715371537912325374220057178644037968853830244556021828470856824490268266*701891213484669324538392116307916711497748944141716405932268856921998095888836188038485%(4591045631796277101630481759697644572279697047794709419703815083179061143595317174709871433213*9389986435783485173223178308551527860321372134496218946489543903461748282832129524816955%617749983769903147672301618631233879364003078329489111709134385207842924914542488009597213355165306%((720136447682891169794943107544277384110088447373340638494882358967503945642936846283-(-291016804646555256612437665191153142888088746209810419487854117739108059324145309%20967697862154098987393306645742854355749346757195124674677689512365840258733430147450272/765237623063329089464850389085427807755562353406369476977976331889581517323569428692-887165136847845199414334805214777588270462432669441285852317241951790058625230598055919813473531666))))))))")), "17495940440584249946234150731255734468059190115805278494235955482801\
        35410616891703140510060879");
        assert_eq!(format!("{}", eval("-651161292207379017302188732920033915698244555000487152565711036729566719745614118407+(364034960686717408793209168573229331804585176740910976220945783789443245641064467933882576*9116204260847468179051039330656157597182024526876546692206642757458525228717599617413210250881715011-131657311055221897997412738696311297464153722074805876545398361711744821749430875117084067519440/236994188070675412286195840622263814377434849385521222327548009928363030551038854805*(206389855169461437266881087202340878963579096725832611689270405950117454622169549782436*59931206633296516440987593366458692582280563308914266137681069438586927243378168619758-894483974370325925521256333599735105207748343532486460178918301295204109857950961799174855768))")), "33186101882555409260634941659725645715332970249860072514591686636277\
        11906916955438995156733825202960263221214869685459091410499582327447\
        836017298998313199750443535159722533133763959278864329");
        assert_eq!(format!("{}", eval("7098822599519801799644138313617297247676993892656691684926641290490871464280698353479*(((282810487833938180658733778264244261969278787251027842800124311776212565033197876*33572659838493387204111361813600173722788921570442412620204422798617711387545110100746832918545675/(101547572238966082058144750896187101743238010329441682949577736809441238465351932/12515554580294732942312525776917686756512879591636382446644689896025675579178913*953869837609273344531601004508508015549740075284740370165199432527244053662372832127938186617974))))")), "88325983347163257447289861006515776068719659187592903160979773950684\
        07335629126412523506405968594255765283464968606418223841937656898352\
        497802617816501817131401438758");
        assert_eq!(format!("{}", eval("((22822748449970430470011855091862199459140006004765482146725833806717157282801804487*937212379600657310789279620213037046889947357665091618757555463582952828593060738))")), "21389762383824000329233337443317133347162072294397062891272480161315\
        28967183763338916836473209322456858180493870832132985217929114205241\
        6591896825600252112791931406");
        assert_eq!(format!("{}", eval("50455306102982600244883313829379059393031412603608854889641169991305895398841566280923246247*(76330754680250266508112330388099584417605090571476113858968905194431854553904571081470%38453928485063618457779196560460920915852445430737106562321369950227394705609939060935*(2744635611811736598407495996020175098259185911020978707579642446433096918424130587998660685064865/16365443955993378197414547200543292731505104266913572670034211055200181569401290401862%5331970281338847445181195196999570998828034125244098977017720430575287387471474190445985394691-2435812875169455548903711483166733435722436458012582337801829338973407791278289103%075719047608192165099051325099118174343114134157992798556139588137735731990426810))")), "-2446831721035262869396966217268011600814914755664101946765654230188\
        19464637822857692627805178009795746050104441358778222833532287181940\
        48960688850790731070178936869868639199234387499848153992962208002987\
        073916346723755332296966387292259204909558020746682520");
        assert_eq!(format!("{}", eval("(894598765893800458186528098539829891968871467459784903779851281610941315350109910564988*910819505904027313838573807418627094599684189940957475730813858550609232536775899868532726431487)")), "81481800593374393518850228518074422482765854449275909176183124504831\
        67187600819204337533251621384751935048603090524516275121233625613872\
        97725008028179697757063871983310102777242977156");
        assert_eq!(format!("{}", eval("31648073610718485599363115888925275407463991395691629342439258666451511683304471517/84094942216062448424814960125254107230316784350761081617674415914058585111558895274314503106128-(((41603697674829883482697464844831461893280004821895085877291044713470685980777595008189283974+627399218536969040737278413300278557122528168218982662556933402528537375783066716572671111872311)))")), "-6274408222346438706207611107651233885844214482238045576428106935732\
        50846469047494167679301156285");
        assert_eq!(format!("{}", eval("7944233156237675052497647644072647924057367600591475662110600369395032337085375989965/424457898678685008762815616181179330978070376429399420620112114401220019154767323654419+(75047011784071948837220241262483515615536409372727997886364425431954427972505126+0619842749385767706494463395675779544573106369048506785735572784122348193880346818343246+(317141405727033954708077426049057166988692538401002171928272321739568991111052854914%351281095212450039712230811912330073249782355298815378877286024828637547907461828213524563349880315))")), "62015996583850652452112031032206986422361067712331716063549894280851\
        3194825885843703286");
        assert_eq!(format!("{}", eval("(900647000270473583232396020944896873413957026947414114442633993859161002384301370618948301231/02229381615793043733632456771557376405538474395407139958140220478332531883231254*444565768543616521378413080479102546792523193466229788560018835061613086887464579623182174*(-6203306971967174074778595687410487429982296663441681465780306749526545306664372190082173441+2736040004419501473636300936700508160592693416078328910242601774736006916784097426568921*(9066070020268763530234187908049193206392788374319224624119234185193295179443677106765+6088362454215638535959300193109358001056180101386047185592634662951920016824973576750%-125455608975300811756070192235058071618028977856881403362534143456924048187657633999+1399885092352064046866499755936084766835857023005838592833508186556779692845541569070669023*781349233413485040837230330515608137323201150160145411099217690076058427687785888912121799763508+21311051969724837980805897462070213393764608238861391714604822569866921550790385179953835944%9028260752483598064930858792745968839735724974139233985443486157039313416106881678-33750300369696923267928855687389074371757587805520776295048285454483286213650238*4680072486049998779577102196828959498107069232704280963335165812365404989455657616705106076913970)))")), "53748485639172383718591795492302583953049038281509085662921428332764\
        12103002198166819534614802735895145854405413464744469290326908116510\
        87032971909280864378053992970048667023252619726815894254447921102935\
        28869538101300314561482065233991453597995183065717977570729535279748\
        24065600511223013481535947954734550616243991162394135360180007911228\
        55203712163389068390944258594567045980");
    }

    #[test]
    fn test_eval_big_9() {
        let eval = |exp| my_bc::eval(exp).expect("");

        assert_eq!(format!("{}", eval("623395187600693350805791078074055534776234669912452903784743257898151994662009870088412027516090-6352807684120808798785908587378836894941792171456789941036174885471575551964102711870317594+((4243426598968606840285855179628956172952255134425371052370990969047619447325838117924-044453161788346916322240570257841148332025357160561976019613377862161132447540778*-11244891727187968425568862843022469570576371143977709849813112699787194174301447389))")), "49987099124113055519083775980711537276693901330196497436902311927574\
        99378746897880939182987308091692210236109869710927724724866791614014\
        84160663868054744994445062");
        assert_eq!(format!("{}", eval("70011715404255003707013790116098678405971408100067726842679656131137086136618653%96161305371728802927327090722273908368572997688086152651067859996330640760212380089845/((09909900700713144914370543517086357832524979695300473128389019733233952801374364771962960104278%(((924935088925752698746804825497938450395018166915280489321557957657680139293758311713770/(926488514307101776545872807113744463987514385475768175005485430977916961383939698813288371672/379800786752972071567728701797590504236574309144651022780320687828565473246044615634558143))))))")), "0");
        assert_eq!(format!("{}", eval("84325131859077804777284931617609720142489600234931571623735289778858273341934671386459163*5383781308810625229709472560149301109867942677608508307987650670984759500201487495995+1860770839318678505408926634509949041984146938002681698408211551496120327533244086387821106118%483664408112231634485961680982190480628771418781039700626341950718772345152748885739341687010280%(3094431893958254023259794162774086967154567666548411663563699318339496460050372476693240599625866465-32808803839364134037820004478003985655535871718543374962844631528874234269080574366866920*-54619113129640646278445817677365773524352194304374810467740092973825572319142346661572595556+71941064087537239020825216949769092884885643912970718565209554003158423852829027770*91956403173081604121688932802045219325837199149146734283357906483900758215435610613461-3485082720648012553558691212083304536878003790741838416490949474605764859816901475521)")), "45398806876589445486116622624433663180386232514251171625544612086445\
        65864039080623165109494305715024686745647896183979655834751708815783\
        74369600573559047026073418090014658303");
        assert_eq!(format!("{}", eval("((6508725780312711507679804677315024186123940108598496471034017721763934052820883979786038751606516357-(52698749369026965002854338291066737578530194911577410772210021650332282248240176267/137910129566834655465764343933018238688271615877696780818585614104863525814939602048452128318093/9435283275639099658232654024052975267056404382150631178740637731741754905144554456732085)))")), "65087257803127115076798046773150241861239401085984964710340177217639\
        34052820883979786038751606516357");
        assert_eq!(format!("{}", eval("717537467821521677026939454999143694671544684167734051980148975589094007004909997966839088177+(14461739733362297152123476957704029939899128214154769871103228528852118811241929006173598%-915310337179132490985887753368455334848779747434117053554229011955139761394256920*003533049419861103810226303518134884478919204361519553092344541165203543688015124009580%(-26456625449818664465327042778547197440775918437123993052371109191376256346216993612803579/7748290331502837590179730089041563000635552815003157162469336808605901335335689209892959%-80325410546877801658424118912224526773603213192142733859028757612068082625364592%404669303987924847615690353621466101378607184072657296574667104016310234141446773241%(5974558185278010263807384251542373932431287219322341571551463987516381419189312632728603*2135380018835011730910959311334046992593690499193250947494543672535206709533575462926%0693418477610928920188301838370756960067284108521135265063540854354694551345786458331589766421322586-((1785585379006616432016807717404385146457978784276966496157816604006180764077614092820610286626412402*-109679096206247511764460853970232006973608975207996062526073132125607216711795084566351383158071915)))))")), "71753746782152167702693945499914369467154468416773405198014897558909\
        4007004909997966839088177");
        assert_eq!(format!("{}", eval("((-2808201016597311617667068545503339979594327735154296019783714853020669076390088443044-445631372992367906018039191643128137057379651038399144300753344032535285115639607005281314070245694%87856895211837152271508630834840059715651426446042783431273063649527543925650447173323468401*230627432142244765784993734045953962126429482952613469529045957733035276442078441147597776570237182*912480500207639755734282923942675701946015067888204308108170732782382516056171228605297496%2201520003309894788607804361476802519544406146074645957031405872696040776676540455))")), "-2809007017649204083683834692122150526420856741534446495408120509287\
        880304555221677075");
        assert_eq!(format!("{}", eval("0292225091302834584544528662752859460924262532858711500750905111021144128372001693299913770419*(-287942668081171186310489863871219080145742164640269999814158557573944206219050169-211753253305462518489792327734117391819527014570020523164915507376028240044812501855156382543731/(946520244794731514051041877244439984024514399106059751013942386904467925975807817221896602271/(380009539257403838281890099292694657184350723443067190747404497302128109495725975631555580341181%34639183478787955180828300673765806821095264985455312640083310055576870935471055-3261089211686735640467216178695595541828242176657860197004994647638698130623333029*-8710477523367576218850823019898246500353474294402274589639034558657961951761830545883080837/2174741440985638337562256797028496337412387454299891061133744004250267407610810770738978%7344543437033504157469183087886195284354677627049388668203079233998270823792179077868830859002071841%23965527036878915941606127925693699882694120983507792403324254143736074590516172272066%707400494385134714832643347731828088147395624139375680764978874904942694587650813746894207)))")), "-8539171319448206919340521659711967562934114410017581782027884752021\
        51424021443154073508657153186453803014496381068552654180097855942661\
        181966064137443989339730832611506968081933968");
        assert_eq!(format!("{}", eval("(4066972610467006330368241563739021680674178471979383525339440570095293176907939396289657786756/8574871953882592258468298159984216317784791056184643496607278212091903716415130697/54794814322977511328630623212900749034133459038068993967475562703393447399601521449625281988676737+-5591199052138039868580980551801879293916581361687389211578461685951687881318103727461479318+39471387252775824553803347259296254633826856232679740227588637275906679272277836857676947*7186884651978902104994016869618220098293683734409385417660813923179042813010303274%48868056476861972607378675400549217401739296226966638722853271500694640536581680286408547347)")), "92342784928400208896877386508174894476766663265524288107370530634717\
        58941481458874762311118");
        assert_eq!(format!("{}", eval("-422430188996675712025694813679207677938611942899623372900707785531425216141391102294351654811957%(39711096501541523278390520305803008217392796052656702533837274382945265658833413074931459850575299%(8010958674121836903126814685899940646449024411498040539374938927348951034935994838709788*(-8009555547694881539678113061009071372286952069766380000975897801437898593961092160402675743256938068*(7185655705678632217606423270830959706736276860157035073627753974580479883871603824941486497%6194872498127629864043583365172119405158933506467239733810213373314698161770207721876676265274610%54171956469198562143291892878987011564159786160871761238213486004707279517020880966880%(1463199303276742654655236360243863877017113288717724137867477853849432851641498234%1768543428770658881082887678612357929374561542378307050904049599167314029979155544238*76968977029671607340831349174051085237955288366697535964656677163446300996946193902531151)))))")), "-4224301889966757120256948136792076779386119428996233729007077855314\
        25216141391102294351654811957");
        assert_eq!(format!("{}", eval("-8278705914261850556939357381679584486825605640251806124058002642003462183461823292866991974/(1070800275856837757890743879704434976602403062788773170938612724697104620904500853473+68559333594332783527359190976092426616372394138179033154345805407654036094171987683183324963405/57745789573038322687857022473192270564738959493372446663051648866105779667374192+(1500524593966066886785863994705620920109779938363438779477957532892123712626739791961629935944/42965029532138163668256493307903835643897577208031419288104664751438199347062413827946943650731-1552176341662762223310493957984547254772363222858506739911438577592774670878070765135827510417732*6990110108531248660278007204134325769776622717664756316229497673098935638487329990784744846520241425))")), "0");
        assert_eq!(format!("{}", eval("618369765400437847549118990317438447488317102876826444310295488497813777175693953516607045%-4236104648095103587319671851393319184617419765580768871855839308644018034864558703344151-(691639814352098503657188882046734154017655799910058689241792209665293047170211780875762288002476605-90816231970651634517693570695775976149902931703428965397587578498195382868727405220307306871239%651328236034203246058831653212745832480288547402050254682136525494055098691150029195235943735875303+(666257418008199693978947195318413984606346872513375783388305604089172590268790536759*-06891752387333145686837704920631322729678670548853879761455075314798717119417346391688829-4776314282966210530042512869202123778984079005914312612500500098616026745419013729221+1586857224417565932023183148380372857885189788758288039585205564985319825406030266978210203500678))")), "45916811511364278116851364192308301722013594340035009667512717419261\
        16751435585529222821482565057695907859231951223992253482339026322650\
        427391581776334888364140373060493538");
        assert_eq!(format!("{}", eval("((32068108433690496123208964841058546191625979715818444077404824656359839644243922549/682366118216390633942941249103589272495533053509556251087824004543912093906149882%(5677007756323964978867014180510117480309344556241411526294921202318123539727820695944926712813908087%80541563897227348881181855473384147241595212534689082086498226661821730290255153344072405*(((387562706968033397097023011197026436347946997062694389656905526226216666923416320875985045068790306-((67430330728374828773952309826358903021950237297882015581508741566417239827165113067439266*((9286592205800937573686919884704548841163462068905089115976298957303350306690438997608-567975207912598887511646877926987941231372527551035166884047958856909862757261069060913304313*966341815333929268990939001661571519596380146431936222353904448688168718025893003686587357628840*037745407250064385213574331700849071701564349751152856978920390761185984283203897141-(-09738265906931952293980262985194226768771803182535091006399119488716580662934870707084*-616513939135532764120493792132730207184696822855935911393605414533148206510920133751131921576%((29558889251366827407445678145856818626652598304292517823983250953122468588812744983696122228*004014322803856342097157637097709003371262570975094454523411295831653630750449483857450/0355090600980926126943814868474318314083323376135205334573493558511298650924643098548645517)))))))))))))")), "46");
        assert_eq!(format!("{}", eval("9385370061635518958411227155912353662632720401557617202681843582194373125906161049240012841925483%(5431409304320181518760580979413168905867329904497892685188294839758594517517425828386920973223%10163593598482771689134696795629632927516486922064132355567509748246759353351824829199%227200573646566466666340425343875123469066947372596496816295653944775658102953241751241*94506476084416113075916725275739642105136594482032648707164252582022926727924906417977118)")), "93853700616355189584112271559123536626327204015576172026818435821943\
        73125906161049240012841925483");
        assert_eq!(format!("{}", eval("62107681741475072647770332382417161620101309666263107474059398449629550226575326327344772749081*-5099351173291213575101442199006981366360872619203259010793825046757317358627440652216355-((-1008732469270579635422655734641360760289061302942273454780284394537860012060850544352513*58502395050560063557527197510363212767370982671197928046828411200208823124988654411105+19618656657987883637036940435659984265348203360130473928062502908354088252689013+-095133398950544609349851223352287636919096805747680518915828011526114834773655784406736))")), "-3167088796997749290802709922897876745273270355619090567689709928648\
        34505336698796095612751050677463257147887632799864977699655462554516\
        241564244819474553724334289891836609357865845167");
        assert_eq!(format!("{}", eval("4660420161143704290285591214572223736587359483725194857868450242901173310408943680700568/115891618700271755830013769686782647174914461606610991829870507647042175561404364/(452643032545865224815905158309563315744125423693844442587690077025997571289661267571602490+29309804905648053512181896699371749884824878682438173978481276139100396666955560358417759-((58168807819671728035208733246872914792731888164239262683613241496602339563336716532522533+-009388236277743778357185217556667540071132157514792827915978464612691922538886422740492139930827431)))")), "0");
        assert_eq!(format!("{}", eval("2423954045158567180884826499732323221226759201537721730617669044075765386478875743-(85194248517873990103052122957008635533147409294416018374689456025043088214867366030015%42446096049372910887627751664185146111516752651959279632477976817417516643617459442341601667/907299953552425463788737352059222165997310220433296037724255633569996970730750216805485303113872-4920869600227570903457880276481588230988819709793918391159268381554070707587811051646*(((47184026897274799169612105278322489921087568883079954085648895743553185248706548395763934463155+(-3516614082489883615608888365151648691113097257079859039256023700626810864564113806513268098426/782127654834622894036622429106528180995431615622656578574287066860636408144400303758534904807127796+18558070509872212964060616878021733446390759555839151182215875285603634421406129809100%58855889792506307288463557974509080261196267267382963775347096038856901065045498503273244)))))")), "23218644366644143872055315175544628387008788705760038677607737274334\
        17298687857867721653525134636100064798668337966055213006969928610364\
        38800121738545700164315066835554009688757473");
        assert_eq!(format!("{}", eval("21216559166895547023784347092749764838828625856057714735730551246269878364758593151701416484/(5093871320385473339488450032466415079631220393561162187095643824444056491729325307738833452006/80181043718839526304638632922391282286559222434491815474401004300675423769651981799*91694761577099117204002468400220758935746026343206275384904267218234115405336673996431225%(((1272449866229841809794922495194518668049705091861671646385366143862137650640804472765+7737099541296166411404473105043919299581447726996122827306960772119982655349339883800*9336229882907444668698078706861716331388576966251276713566558110463216573138583277/802293076270709300707892176275894955586375337151959723753589972478085099551791794678468*929524922645209242578077114972316224012660554397115319608485963261786048559246267176480952-(9929608797358221117479530657164454955715271802726963078291185115667665731224010782216523889641*30211334329746026091810696499214614957754232555566730395664401828886495057907632*862408474285795303960939480676574402383870648209013234459071241889358439105469607092492/29998100916606018083386810836131126672188187274538790254019916117270861151025091373728707)))))")), "0");
        assert_eq!(format!("{}", eval("73780214227407794736128074057013444278516966289425377646210646592520597173237340315671*(81335176630784535771122557425276790183900062527470162202000317324986028467463984891949655076409+96074213916847032456054984985214480342140567395080201252305151683894627001294943205801328905750*795294106629446275216153986422610142818112824310677895230757062432287286034460494529/8301078296279990507069587759761312973642819452656842775252980597000401752804850693821325*(246846388260944838483911409371683576066065876400391476479620132400676411228818208002-(29707760402302675768854247816482938964557017292098040455906530952358820568428152924*-6127304577651298350228879727464616655791960304372473904858294523796618773024530159%(((-18696073762405928272635086902243696555671714202258222076786211861442484481677101451684274%-209895751869421471898628990053635144999523161097072099860829254728998449979273097921843116%62974109927374485794581456968533123988398278629769146922415189782194985643804002459199008-9035658922942405450393882964080675810141698793210914396267570579364703185983875858621+-13202010319697205791949904747618295527253634148319031020304346424575159669221795521134467064227+(09890379384241706880117214343487277451970105773257393058301233087493724893902600*(((-77150530874938734859678751304247142901234060349673146388886499982221059351950103276610962975894432+(50869834637265603932668952970755728711359339259684734243173996601944939090012114009%((60769594807953777413157143481823386966680376424814819683599659888179862791317184140750517351045149%((8238180284438954413914862185162933821167436548140423548150513612364892765702373902445999414928872746/3865545972717242172863027331732226125236295643809350287461198397031351419931119392669+(2868474070772831393221730951270078752943345825473211470982716400670129073545915560407/788718525622349636357402591175694353753866262355167137080290976423101280044249592910*-170584503753189130683832741244031653188582115132511807920005212948485978546859975965495-37546207843605448822318774758973222365316603884907020184548374212043937441153640013250032280281932))))))))))))))))")), "12361733800075973439223925892146379080693167097485061595330801614399\
        07843109571716130316313156659871138479529827312747264907585088573305\
        94940700961441118052499803371130884878516756784265426593619668851974\
        28673055544119405998202861598487817929018144381735219562193133418615\
        17586423083029451463339936145982620433316804643128490597302903076736\
        09");
    }
}